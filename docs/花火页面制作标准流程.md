# 花火页面制作标准流程

## 🎯 **制作五层花火详情页标准流程**

### ✅ **步骤1：前期准备**
- [ ] 确认Walker Plus官方数据源URL
- [ ] 检查第四层数据文件是否存在
- [ ] 确认目标页面URL路径

### ✅ **步骤2：创建数据文件**
- [ ] 创建`src/data/level5-[月份]-[地区]-[名称].ts`
- [ ] **必须包含字段检查**：
  - [ ] `mapEmbedUrl`: Google Maps嵌入URL
  - [ ] `japaneseName`: 完整日文名称
  - [ ] `date`: "2025年X月X日"格式
  - [ ] 所有`viewingSpots.name`: 中文汉字

### ✅ **步骤3：创建页面文件**
- [ ] 创建`src/app/[月份]/hanabi/[地区]/[名称]/page.tsx`
- [ ] 导入数据文件
- [ ] 传递正确的`regionKey`参数

### ✅ **步骤4：关键步骤 - 更新第四层链接**
> **⚠️ 这是最容易忘记的步骤！**

- [ ] 打开对应的`src/data/level4-[月份]-[地区]-hanabi.ts`
- [ ] 找到对应的花火事件
- [ ] **必须添加**：`detailLink: '/[月份]/hanabi/[地区]/[名称]'`
- [ ] 检查`HanabiEvent`接口是否包含`detailLink?: string`

### ✅ **步骤5：完成验证**
- [ ] 运行：`npm run check-all`
- [ ] 浏览器测试：第四层 → 点击"查看详情" → 确认能正常跳转
- [ ] 检查第五层页面所有标签页功能

## 🚫 **绝对禁止**
- ❌ 创建第五层页面后不更新第四层链接
- ❌ 跳过万能检查脚本验证
- ❌ 未在浏览器中实际测试链接

## 📋 **AI执行清单**
每次制作页面时，AI必须：

1. **询问确认**：第四层数据文件路径
2. **强制检查**：是否需要添加detailLink字段
3. **自动验证**：运行`npm run check-all`
4. **功能测试**：确认"查看详情"按钮工作
5. **问题反馈**：发现问题立即报告用户

## 🔧 **紧急修复流程**
如果发现"查看详情"按钮不工作：

1. 检查第四层数据文件对应事件
2. 添加`detailLink`字段
3. 更新`HanabiEvent`接口（如需要）
4. 运行验证脚本确认修复

## 💡 **记忆口诀**
**"五层创建四层联，链接验证不能缺"**
- 五层页面创建完成
- 四层链接必须更新  
- 验证测试确保无误 